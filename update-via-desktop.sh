#!/bin/bash

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ GitHub Desktop (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é)
# –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –¥–µ–ª–∞–µ—Ç –∫–æ–º–º–∏—Ç, –∞ push –¥–µ–ª–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ GitHub Desktop

cd "$(dirname "$0")"

echo "üîÑ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π..."
echo ""

# –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
echo "üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤..."
git add -A

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è
if [ -z "$(git status --porcelain)" ]; then
    echo "‚úÖ –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∫–æ–º–º–∏—Ç–∞"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –Ω–µ–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã
    if git log origin/main..HEAD --oneline | grep -q .; then
        echo ""
        echo "üì§ –ï—Å—Ç—å –Ω–µ–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã!"
        echo "   –û—Ç–∫—Ä–æ–π—Ç–µ GitHub Desktop –∏ –Ω–∞–∂–º–∏—Ç–µ 'Push origin'"
    fi
    exit 0
fi

# –°–æ–∑–¥–∞–µ–º –∫–æ–º–º–∏—Ç
COMMIT_MSG="–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: $(date '+%Y-%m-%d %H:%M:%S') - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Crypto Coach"

echo "üíæ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞..."
git commit -m "$COMMIT_MSG"

echo ""
echo "‚úÖ –ö–æ–º–º–∏—Ç —Å–æ–∑–¥–∞–Ω!"
echo ""
echo "üì§ –¢–µ–ø–µ—Ä—å –æ—Ç–∫—Ä–æ–π—Ç–µ GitHub Desktop –∏ –Ω–∞–∂–º–∏—Ç–µ 'Push origin'"
echo "   (–∫–Ω–æ–ø–∫–∞ –≤–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞)"
echo ""
echo "üåê –ü–æ—Å–ª–µ push Render –æ–±–Ω–æ–≤–∏—Ç —Å–∞–π—Ç —á–µ—Ä–µ–∑ 1-2 –º–∏–Ω—É—Ç—ã"
echo "   https://crypto-academy-pro.onrender.com/"

